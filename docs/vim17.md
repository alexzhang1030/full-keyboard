# vim 17

掌握宏

## 关于宏的录制

- 开始录制：`q` + `小写字母`(寄存器的位置)，例如 `qa`。
- 结束录制：`q`

在录制宏的时候，为了保证宏的通用性，尽量规范光标的位置。例如宏的第一步指令就是跳转到行首位置

## 使用宏

- 使用指定宏：`@` + `宏名`，例如 `@a`
- 使用上一次的宏：`@@`

## 查看已经录制好的宏

- `:reg` + `宏名`，例如 `:reg a`

## 其他内容 

### 重复执行

- `数字` + `@` + `宏名`，例如 `2@a`，执行两次宏 `a`

### 安全机制

当宏在执行过程中，若出现任何报错，则会立刻停止执行当前宏

### 追加宏

- `q + 宏的名字的大写/小写`，如果名字是大写，那么就是小写，反之。

例如你录制了一个宏的指令是 `a`，内容是 `gUiw`，那么此时你已经退出了录制状态，你还想再加一个 `j` 内容，那么此时的操作如下：

- `qA`
- 进入到最后的步骤
- 按 `j`
- 按 `q` 退出录制
- 此时 `qa` 宏的内容就是 `gUiwj` 了

### 修改宏

其实就是修改寄存器中的内容，主要有两步：

- 取出来
- 修改

#### 取出来

取出来有两个方案：

- `"` + 寄存器名称 + `p` 复刻出来
- `:put` + 寄存器名称

拿出来的就是一个字符串，我们修改完成之后

#### 修改宏

修改宏也存在两种方式：

- `"` + 寄存器名称 + `yy` 复制本行，然后修改
- `"` + 寄存器名称 + `yw` 复制一个单词

不过目前 VSCode 的 vim 插件并不支持修改，修改完成后此宏将不再有效果

## 练习场

```js
const t = 1
const t = 1
const t = 1
```
